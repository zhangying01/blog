+++

date = "2020-11-17"

title = "读书笔记之《深入理解Java虚拟机第三版》"

description = "深入理解Java虚拟机第三版"

series = ["book", "jvm"]

+++

## 理解Java虚拟机

### JVM运行时数据区域

![jvm](http://106.53.240.171/images/jvm/JVM-Memory.png)

### 说明

每开启一个线程JVM都给线程分配三个独立的内存区域，分别是Stack Area（虚拟机栈）、PC Registers（程序计数器）、Native Method Area（本地方法区）。而他们的共享内存区域是Method Area（方法区）、Heap（堆）。



### PC Register

程序寄存器，线程执行的字节码的行号指示器，通过改变计数器的值选取下一条执行的字节码指令，控制分支、循环、跳转、异常处理、线程恢复。

> java虚拟机的多线程是通过线程轮换、分配处理器的执行时间的方式来实现的。**在任何一个确定的时刻，一个处理器（多核来说也是一个处理器）都只会执行一条线程中的指令**。为了每个线程都能恢复到正确的执行位置，所以就有了PC Register。

### Stack Area

虚拟机栈，线程私有，生命周期与线程相同。**每个方法被执行的时候，jvm都会同步创建一个栈帧（Stack Frame）用于存储局部变量表、操作数栈、动态连接、方法出口等信息**，每个方法被调用直至完成，就对应一个栈帧从入栈到出栈的过程。

虚拟机栈，更多情况下只是指虚拟机栈中的局部变量表部分。局部变量表存放了编译期可知的各种Java虚拟机 基本数据类型（boolean、byte、char、short、int、float、long、double)、对象引用（reference类型，它并不等同于对象本身











